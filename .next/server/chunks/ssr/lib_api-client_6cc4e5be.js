module.exports=[158,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api",c=()=>null,d=a=>{},e=()=>null,f=a=>{},g=()=>{},h=a=>{},i=async(a,d={})=>{let e=c(),f={"Content-Type":"application/json",...d.headers};e&&(f.Authorization=`Bearer ${e}`);let h={...d,headers:f};try{let c=await fetch(`${b}${a}`,h),f=await c.text(),k=null;try{k=f?JSON.parse(f):null}catch(a){k=f}if(!c.ok){if(401===c.status&&e){if(await j())return i(a,d);g(),window.location.href="/login"}let b=k&&"object"==typeof k&&k.message?k.message:"string"==typeof k?k:"API request failed";throw Error(b)}return k}catch(a){throw console.error("API Request Error:",a),a}},j=async()=>{let a=e();if(!a)return!1;try{let c=await fetch(`${b}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:a})}),e=await c.text(),g=null;try{g=e?JSON.parse(e):null}catch(a){g=e}if(c.ok&&g&&g.success)return d(g.data.accessToken),f(g.data.refreshToken),!0;return!1}catch(a){return console.error("Token refresh error:",a),!1}},k={register:async a=>{let b=await i("/auth/register",{method:"POST",body:JSON.stringify(a)});return b.success&&(d(b.data.accessToken),f(b.data.refreshToken),h(b.data.user)),b},login:async a=>{let b=await i("/auth/login",{method:"POST",body:JSON.stringify(a)});return b.success&&(d(b.data.accessToken),f(b.data.refreshToken),h(b.data.user)),b},logout:()=>{g()},getProfile:async()=>i("/auth/me"),updateProfile:async a=>i("/auth/me",{method:"PUT",body:JSON.stringify(a)}),changePassword:async a=>i("/auth/change-password",{method:"POST",body:JSON.stringify(a)})},l={search:async a=>{let b=new URLSearchParams(a).toString();return i(`/schedules/search?${b}`)},getById:async a=>i(`/schedules/${a}`),getSeats:async a=>i(`/schedules/${a}/seats`),getAll:async()=>i("/schedules")},m={create:async a=>i("/bookings",{method:"POST",body:JSON.stringify(a)}),getMyBookings:async(a="all")=>{let b=a&&"all"!==a?`?status=${a}`:"";return i(`/bookings${b}`)},getById:async a=>i(`/bookings/${a}`),cancel:async(a,b)=>i(`/bookings/${a}/cancel`,{method:"PUT",body:JSON.stringify({reason:b})})},n={getAll:async()=>i("/routes"),getById:async a=>i(`/routes/${a}`),getPickupPoints:async a=>i(`/routes/${a}/pickup-points`),getDropoffPoints:async a=>i(`/routes/${a}/dropoff-points`)},o={getAll:async()=>i("/vans"),getById:async a=>i(`/vans/${a}`)},p={getDashboardStats:async()=>i("/admin/dashboard"),getTodaySchedules:async()=>i("/admin/schedules"),getRecentBookings:async(a=10)=>i("/admin/dashboard"),getAllBookings:async(a={})=>{let b=new URLSearchParams(a).toString();return i(`/admin/bookings?${b}`)},getBookingDetails:async a=>i(`/admin/bookings/${a}`),updateBookingStatus:async(a,b)=>i(`/admin/bookings/${a}/status`,{method:"PUT",body:JSON.stringify({status:b})}),getAllSchedules:async(a={})=>{let b=new URLSearchParams(a).toString();return i(`/admin/schedules?${b}`)},createSchedule:async a=>i("/admin/schedules",{method:"POST",body:JSON.stringify(a)}),updateSchedule:async(a,b)=>i(`/admin/schedules/${a}`,{method:"PUT",body:JSON.stringify(b)}),deleteSchedule:async a=>i(`/admin/schedules/${a}`,{method:"DELETE"}),getAllVans:async()=>i("/admin/vans"),createVan:async a=>i("/admin/vans",{method:"POST",body:JSON.stringify(a)}),updateVan:async(a,b)=>i(`/admin/vans/${a}`,{method:"PUT",body:JSON.stringify(b)}),deleteVan:async a=>i(`/admin/vans/${a}`,{method:"DELETE"}),getAllRoutes:async()=>i("/admin/routes"),createRoute:async a=>i("/admin/routes",{method:"POST",body:JSON.stringify(a)}),updateRoute:async(a,b)=>i(`/admin/routes/${a}`,{method:"PUT",body:JSON.stringify(b)}),deleteRoute:async a=>i(`/admin/routes/${a}`,{method:"DELETE"})};a.s(["adminAPI",0,p,"authAPI",0,k,"bookingAPI",0,m,"default",0,{authAPI:k,scheduleAPI:l,bookingAPI:m,routeAPI:n,vanAPI:o,adminAPI:p},"getRefreshToken",0,e,"getToken",0,c,"getUser",0,()=>null,"paymentsAPI",0,{create:async a=>i("/payments",{method:"POST",body:JSON.stringify(a)}),getByBookingId:async a=>i(`/payments/${a}`)},"removeTokens",0,g,"reviewAPI",0,{getAll:async(a={})=>{let b=new URLSearchParams(a).toString(),c=b?`?${b}`:"";return i(`/reviews${c}`)}},"routeAPI",0,n,"scheduleAPI",0,l,"setRefreshToken",0,f,"setToken",0,d,"setUser",0,h,"vanAPI",0,o])}];

//# sourceMappingURL=lib_api-client_6cc4e5be.js.map