module.exports=[72422,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(73824),g=a.i(18457),h=a.i(33991),i=a.i(54659),j=a.i(49188),k=a.i(86576),l=a.i(158),m=b([h,i]);function n(){let a=(0,f.useRouter)(),{from:b,to:c,date:m}=a.query,[n,o]=(0,e.useState)([]),[p,q]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),[t,u]=(0,e.useState)("all"),[v,w]=(0,e.useState)("time"),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(b||""),[D,E]=(0,e.useState)(c||""),[F,G]=(0,e.useState)(m||new Date().toISOString().split("T")[0]);(0,e.useEffect)(()=>{let a=localStorage.getItem("accessToken");y(!!a)},[]),(0,e.useEffect)(()=>{(async()=>{try{let a=await l.routeAPI.getAll();q(a.data||[])}catch(a){console.error("Error fetching routes:",a)}})()},[]),(0,e.useEffect)(()=>{s(!0),(async()=>{try{let a;if(b||c||m){A(!0);let d={};b&&(d.from=b),c&&(d.to=c),m&&(d.date=m),a=await l.scheduleAPI.search(d)}else A(!1),a=await l.scheduleAPI.getAll();try{let b=a.data||[],c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()),e=b.filter(a=>{if(!a.departure_time)return!1;let b=a.departure_time;"string"==typeof b&&b.includes(" ")&&(b=b.replace(" ","T"));let c=new Date(b);return new Date(c.getFullYear(),c.getMonth(),c.getDate())>=d});o(e)}catch(b){o(a.data||[])}}catch(a){console.error("Error fetching schedules:",a),o([])}finally{s(!1)}})()},[b,c,m]);let H=[...new Set(p.map(a=>a.origin))],I=[...new Set(p.map(a=>a.destination))],J=n.filter(a=>{let b=a.price||a.route?.base_price||0;return"all"===t||("low"===t?b<=150:"mid"===t?b>150&&b<=200:"high"!==t||b>200)}).sort((a,b)=>{let c=a.price||a.route?.base_price||0,d=b.price||b.route?.base_price||0;return"time"===v?new Date(a.departure_time)-new Date(b.departure_time):"price-low"===v?c-d:"price-high"===v?d-c:0});return(0,d.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-gray-50 to-white",children:[(0,d.jsx)(i.default,{}),(0,d.jsxs)("div",{className:"flex-1 container mx-auto px-4 lg:px-8 py-8",children:[(0,d.jsxs)("div",{className:"relative overflow-hidden rounded-3xl mb-8 bg-gradient-to-r from-orange-500 to-red-500 p-8 text-white shadow-xl",children:[(0,d.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,d.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')]"})}),(0,d.jsx)("div",{className:"relative z-10",children:(0,d.jsxs)("form",{onSubmit:b=>{b.preventDefault(),B&&D&&F&&a.push(`/search?from=${encodeURIComponent(B)}&to=${encodeURIComponent(D)}&date=${F}`)},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2",children:"จาก"}),(0,d.jsxs)("select",{value:B,onChange:a=>C(a.target.value),className:"w-full px-4 py-3 rounded-lg text-gray-900 bg-white border-2 border-transparent focus:border-white focus:ring-2 focus:ring-white focus:ring-opacity-50 transition-all",required:!0,children:[(0,d.jsx)("option",{value:"",children:"เลือกจุดขึ้นรถ"}),H.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2",children:"ไป"}),(0,d.jsxs)("select",{value:D,onChange:a=>E(a.target.value),className:"w-full px-4 py-3 rounded-lg text-gray-900 bg-white border-2 border-transparent focus:border-white focus:ring-2 focus:ring-white focus:ring-opacity-50 transition-all",required:!0,children:[(0,d.jsx)("option",{value:"",children:"เลือกจุดลงรถ"}),I.map(a=>(0,d.jsx)("option",{value:a,children:a},a))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2",children:"วันที่เดินทาง"}),(0,d.jsx)("input",{type:"date",value:F,onChange:a=>G(a.target.value),className:"w-full px-4 py-3 rounded-lg text-gray-900 bg-white border-2 border-transparent focus:border-white focus:ring-2 focus:ring-white focus:ring-opacity-50 transition-all",required:!0})]}),(0,d.jsx)("div",{className:"flex items-end",children:(0,d.jsxs)(h.Button,{type:"submit",size:"lg",className:"w-full bg-white text-orange-600 hover:bg-gray-50 font-semibold py-3 shadow-md hover:shadow-lg transition-all",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"ค้นหา"]})})]})})]}),(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,d.jsxs)("div",{className:"flex flex-wrap gap-3 lg:hidden",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,d.jsx)("label",{className:"block text-xs text-gray-600 mb-1 ml-1",children:"เรียงตาม"}),(0,d.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 text-gray-900 bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all",children:[(0,d.jsx)("option",{value:"time",children:"เวลาออกเดินทาง"}),(0,d.jsx)("option",{value:"price-low",children:"ราคาต่ำ - สูง"}),(0,d.jsx)("option",{value:"price-high",children:"ราคาสูง - ต่ำ"})]})]}),(0,d.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,d.jsx)("label",{className:"block text-xs text-gray-600 mb-1 ml-1",children:"ช่วงราคา"}),(0,d.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 text-gray-900 bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all",children:[(0,d.jsx)("option",{value:"all",children:"ทั้งหมด"}),(0,d.jsx)("option",{value:"low",children:"฿0 - ฿150"}),(0,d.jsx)("option",{value:"mid",children:"฿150 - ฿200"}),(0,d.jsx)("option",{value:"high",children:"฿200+"})]})]})]}),(0,d.jsxs)("aside",{className:"hidden lg:block lg:w-64 space-y-4",children:[(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-5",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"เรียงตาม"}),(0,d.jsxs)("select",{value:v,onChange:a=>w(a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 text-gray-900 bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all",children:[(0,d.jsx)("option",{value:"time",children:"เวลาออกเดินทาง"}),(0,d.jsx)("option",{value:"price-low",children:"ราคาต่ำ - สูง"}),(0,d.jsx)("option",{value:"price-high",children:"ราคาสูง - ต่ำ"})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-5",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"ช่วงราคา"}),(0,d.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-200 text-gray-900 bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all",children:[(0,d.jsx)("option",{value:"all",children:"ทั้งหมด"}),(0,d.jsx)("option",{value:"low",children:"฿0 - ฿150"}),(0,d.jsx)("option",{value:"mid",children:"฿150 - ฿200"}),(0,d.jsx)("option",{value:"high",children:"฿200+"})]})]})]}),(0,d.jsx)("div",{className:"flex-1 space-y-5",children:r?(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[(0,d.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mb-4"}),(0,d.jsx)("p",{className:"text-gray-600 text-lg",children:"กำลังค้นหาเที่ยวรถ..."})]}):J.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex items-center justify-between mb-5",children:(0,d.jsxs)("h2",{className:"text-lg font-semibold text-gray-700",children:["พบ ",(0,d.jsx)("span",{className:"text-gray-900 font-bold text-xl",children:J.length})," เที่ยวรถ"]})}),J.map(b=>{let c,e=p.find(a=>a.origin===b.origin&&a.destination===b.destination)||b.route||{},f=b.van||{},g=b.available_seats||0,i=b.total_seats||f.total_seats||13,j=b.price||e.base_price||0,l=b.origin||e.origin||"",m=b.destination||e.destination||"";return(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,d.jsxs)("div",{className:"md:w-72 h-52 md:h-auto relative overflow-hidden",children:[e.image_url?(0,d.jsx)("img",{src:e.image_url||null,alt:`${l} ถึง ${m}`,className:"w-full h-full object-cover"}):(0,d.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-orange-50 to-red-50 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center text-gray-400",children:[(0,d.jsx)("svg",{className:"w-16 h-16 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,d.jsx)("p",{className:"text-sm",children:"ไม่มีรูปภาพ"})]})}),g<=3&&g>0&&(0,d.jsx)("div",{className:"absolute top-4 right-4 bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg",children:"เหลือไม่กี่ที่!"})]}),(0,d.jsx)("div",{className:"flex-1 p-6",children:(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-5",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:[l," → ",m]}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 mb-5 flex items-center gap-2",children:[(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),b.license_plate||f.license_plate||"รถตู้ VIP"," • ",f.type||"ปรับอากาศ"]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-5",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"เวลาออกเดินทาง"}),(0,d.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(0,k.formatTime)((0,k.formatIsoTime)(b.departure_time)||b.departure_time)}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(c=b.departure_date||(b.departure_time&&b.departure_time.includes("T")?b.departure_time.split("T")[0]:null),(0,k.formatThaiDate)(c))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"ที่นั่งว่าง"}),(0,d.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[g," ที่นั่ง"]}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["จาก ",i," ที่นั่ง"]})]})]}),(b.duration_minutes||e.duration)&&(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsxs)("span",{children:["ระยะเวลาเดินทาง: ",(0,d.jsx)("span",{className:"font-medium text-gray-900",children:b.duration_minutes?`${Math.floor(b.duration_minutes/60)} ชั่วโมง ${b.duration_minutes%60} นาที`:e.duration})]})]})]}),(0,d.jsxs)("div",{className:"flex flex-row lg:flex-col items-center lg:items-end justify-between lg:justify-start gap-4 border-t lg:border-t-0 lg:border-l border-gray-100 pt-5 lg:pt-0 lg:pl-6 lg:min-w-[180px]",children:[(0,d.jsxs)("div",{className:"lg:text-right",children:[(0,d.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-1",children:"ราคา/ที่นั่ง"}),(0,d.jsxs)("p",{className:"text-4xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:[j,"฿"]})]}),(0,d.jsx)(h.Button,{onClick:()=>{var c;return c=b.id,void(x?a.push(`/select-points/${c}`):(localStorage.setItem("redirectAfterLogin",`/select-points/${c}`),a.push("/login")))},disabled:0===g,className:"w-full lg:w-44 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg disabled:from-gray-300 disabled:to-gray-400",children:0===g?"เต็มแล้ว":"เลือกที่นั่ง"})]})]})})]})},b.id)})]}):(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-16 text-center",children:[(0,d.jsx)("svg",{className:"w-24 h-24 text-gray-300 mx-auto mb-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"ไม่พบเที่ยวรถที่ตรงกับเงื่อนไข"}),(0,d.jsx)("p",{className:"text-gray-500 text-lg mb-6",children:"ลองปรับเปลี่ยนตัวกรองหรือค้นหาด้วยเส้นทางอื่น"}),(0,d.jsx)(g.default,{href:"/",children:(0,d.jsx)(h.Button,{className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white",children:"กลับหน้าแรก"})})]})})]})]}),(0,d.jsx)(j.default,{})]})}[h,i]=m.then?(await m)():m,a.s(["default",()=>n]),c()}catch(a){c(a)}},!1),19732,a=>a.a(async(b,c)=>{try{var d=a.i(42898),e=a.i(58287),f=a.i(67815),g=a.i(74843),h=a.i(43594),i=a.i(72422),j=a.i(12673),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/search",pathname:"/search",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/search",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_682f6851._.js.map