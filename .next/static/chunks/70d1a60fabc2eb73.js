(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96455,e=>{"use strict";let t={กรุงเทพฯ:{name:"หมอชิตใหม่",full:"ท่ารถตู้หมอชิตใหม่ - กรุงเทพฯ",address:"อาคารจอดรถ ฝั่งทิศเหนือ หมอชิตใหม่",province:"กรุงเทพฯ"},กรุงเทพมหานคร:{name:"หมอชิตใหม่",full:"ท่ารถตู้หมอชิตใหม่ - กรุงเทพฯ",address:"อาคารจอดรถ ฝั่งทิศเหนือ หมอชิตใหม่",province:"กรุงเทพฯ"},พัทยา:{name:"พัทยากลาง",full:"ท่ารถตู้พัทยากลาง - ชลบุรี",address:"ใกล้เซ็นทรัลพัทยา ถนนพัทยากลาง",province:"ชลบุรี"},หัวหิน:{name:"หัวหินตลาดฉัตรไชย",full:"ท่ารถตู้หัวหิน - ประจวบคีรีขันธ์",address:"ใกล้ตลาดฉัตรไชย ถนนเพชรเกษม",province:"ประจวบคีรีขันธ์"},เชียงใหม่:{name:"อาเขต",full:"ท่ารถตู้อาเขต - เชียงใหม่",address:"ใกล้สนามบินเชียงใหม่ หน้าโลตัสอาเขต",province:"เชียงใหม่"},ขอนแก่น:{name:"เซ็นทรัลขอนแก่น",full:"ท่ารถตู้ขอนแก่น - ขอนแก่น",address:"หน้าเซ็นทรัลพลาซ่า ขอนแก่น",province:"ขอนแก่น"},ภูเก็ต:{name:"ตลาดสดภูเก็ต",full:"ท่ารถตู้ภูเก็ต - ภูเก็ต",address:"ใกล้ตลาดสดภูเก็ต ถนนรังสิต",province:"ภูเก็ต"},อยุธยา:{name:"สถานีรถอยุธยา",full:"ท่ารถตู้อยุธยา - พระนครศรีอยุธยา",address:"ใกล้สถานีรถไฟอยุธยา",province:"พระนครศรีอยุธยา"},นครราชสีมา:{name:"เทอร์มินัลโคราช",full:"ท่ารถตู้โคราช - นครราชสีมา",address:"สถานีขนส่งผู้โดยสารจังหวัดนครราชสีมา",province:"นครราชสีมา"},เชียงราย:{name:"หอนาฬิกาเชียงราย",full:"ท่ารถตู้เชียงราย - เชียงราย",address:"ใกล้หอนาฬิกา ถนนพหลโยธิน",province:"เชียงราย"},กาญจนบุรี:{name:"สะพานข้ามแม่น้ำแคว",full:"ท่ารถตู้กาญจนบุรี - กาญจนบุรี",address:"ใกล้สะพานข้ามแม่น้ำแคว",province:"กาญจนบุรี"}};function r(e){return t[e]||{name:e,full:`จุดขึ้นรถใน${e}`,address:"",province:e}}function s(e){return t[e]||{name:e,full:`จุดลงรถใน${e}`,address:"",province:e}}function n(e){if(!e)return"N/A";let t=e;e.includes("T")&&(t=e.split("T")[0]);let[r,s,n]=t.split("-");return`${parseInt(n)} ${["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."][parseInt(s)-1]} ${parseInt(r)+543}`}function a(e){if(!e)return"N/A";try{if(e.includes("T")){let t=e.split("T");if(t[1]){let e=t[1].split(":");return`${e[0]}:${e[1]} น.`}}let t=e.split(":");return`${t[0]}:${t[1]} น.`}catch(e){return"N/A"}}function l(e){if(!e)return!0;if("string"==typeof e){let t=e.trim();if(""===t||t.startsWith("0000")||t.startsWith("0001")||t.startsWith("0000-00-00"))return!0}let t=new Date(e);return!!(Number.isNaN(t.getTime())||t.getFullYear&&1>=t.getFullYear())}function i(e){if(l(e))return null;try{if("string"==typeof e&&e.includes("T")){let t=e.split("T")[1];if(!t)return null;let r=t.split(":")[0],s=t.split(":")[1];return`${r.padStart(2,"0")}:${s.padStart(2,"0")}`}let t=new Date(e);if(Number.isNaN(t.getTime()))return null;let r=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return`${r}:${s}`}catch(e){return null}}e.s(["formatIsoTime",()=>i,"formatThaiDate",()=>n,"formatTime",()=>a,"getDropoffLocation",()=>s,"getPickupLocation",()=>r,"isZeroOrInvalidTimestamp",()=>l])},6727,e=>{"use strict";var t=e.i(94601),r=e.i(34474),s=e.i(58331),n=e.i(36960),a=e.i(72262);function l({children:e}){let l=(0,s.useRouter)(),i=l.pathname,[o,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{{let e=(0,a.getToken)(),t=(0,a.getUser)();if(!e||!(t&&t.role&&"admin"===t.role.toLowerCase())){d(!0),setTimeout(()=>{window.location.href="/admin/login"},650);return}let r=e=>{d(!0)};return window.addEventListener("api:unauthorized",r),()=>{window.removeEventListener("api:unauthorized",r)}}},[]);let c=[{label:"Dashboard",href:"/admin/dashboard",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{label:"รถตู้",href:"/admin/vans",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},{label:"เส้นทาง",href:"/admin/routes",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},{label:"รอบรถ",href:"/admin/schedules",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{label:"การจอง",href:"/admin/bookings",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"container mx-auto px-4 lg:px-8",children:(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-900",children:"Admin Panel"}),(0,t.jsx)("div",{className:"text-xs text-gray-600 -mt-0.5",children:"VanGo Management"})]})]}),(0,t.jsxs)("button",{onClick:()=>{try{(0,a.removeTokens)()}catch(e){}l.push("/admin/login")},className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"ออกจากระบบ"]})]})})}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("aside",{className:"w-64 min-h-[calc(100vh-65px)] bg-white border-r border-gray-200 sticky top-16 hidden lg:block",children:(0,t.jsx)("nav",{className:"p-4 space-y-1",children:c.map(e=>{let s=i===e.href;return(0,t.jsx)(r.default,{href:e.href,children:(0,t.jsxs)("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium ${s?"bg-blue-600 text-white shadow-sm":"text-gray-700 hover:bg-gray-100"}`,children:[e.icon,e.label]})},e.href)})})}),(0,t.jsx)("main",{className:"flex-1 p-6 lg:p-8",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:e})})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2",children:"ต้องล็อกอินด้วยบัญชีแอดมิน"}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:"หน้านี้ต้องใช้สิทธิ์ผู้ดูแลระบบ กรุณาล็อกอินด้วยบัญชีแอดมินเพื่อใช้งานหรือคลิกปุ่มเข้าสู่ระบบ"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{d(!1)},className:"px-4 py-2 rounded-lg border",children:"ปิด"}),(0,t.jsx)(r.default,{href:"/admin/login",children:(0,t.jsx)("button",{className:"px-4 py-2 rounded-lg bg-red-600 text-white",children:"ไปที่หน้าเข้าสู่ระบบ"})})]})]})})]})}e.s(["default",()=>l])},68689,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={AppRouterContext:function(){return l},GlobalLayoutRouterContext:function(){return o},LayoutRouterContext:function(){return i},MissingSlotContext:function(){return c},TemplateContext:function(){return d}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(2879)._(e.r(36960)),l=a.default.createContext(null),i=a.default.createContext(null),o=a.default.createContext(null),d=a.default.createContext(null),c=a.default.createContext(new Set)},49861,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={NavigationPromisesContext:function(){return d},PathParamsContext:function(){return o},PathnameContext:function(){return i},SearchParamsContext:function(){return l},createDevToolsInstrumentedPromise:function(){return c}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(36960),l=(0,a.createContext)(null),i=(0,a.createContext)(null),o=(0,a.createContext)(null),d=(0,a.createContext)(null);function c(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},16383,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={BailoutToCSRError:function(){return l},isBailoutToCSRError:function(){return i}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a="BAILOUT_TO_CLIENT_SIDE_RENDERING";class l extends Error{constructor(e){super(`Bail out to client-side rendering: ${e}`),this.reason=e,this.digest=a}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===a}},37750,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={HTTPAccessErrorStatus:function(){return a},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return i},getAccessFallbackErrorTypeByStatus:function(){return c},getAccessFallbackHTTPStatus:function(){return d},isHTTPAccessFallbackError:function(){return o}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},l=new Set(Object.values(a)),i="NEXT_HTTP_ERROR_FALLBACK";function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===i&&l.has(Number(r))}function d(e){return Number(e.digest.split(";")[1])}function c(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},32739,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return n}});var s,n=((s={})[s.SeeOther=303]="SeeOther",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.PermanentRedirect=308]="PermanentRedirect",s);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},51894,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s,n={REDIRECT_ERROR_CODE:function(){return i},RedirectType:function(){return o},isRedirectError:function(){return d}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let l=e.r(32739),i="NEXT_REDIRECT";var o=((s={}).push="push",s.replace="replace",s);function d(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,s]=t,n=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===i&&("replace"===s||"push"===s)&&"string"==typeof n&&!isNaN(a)&&a in l.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},26855,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return a}});let s=e.r(37750),n=e.r(51894);function a(e){return(0,n.isRedirectError)(e)||(0,s.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},57341,e=>{"use strict";var t=e.i(94601),r=e.i(36960),s=e.i(43255),n=e.i(14586),a=e.i(6727),l=e.i(72262),i=e.i(96455);function o(){let[e,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)("add"),[u,m]=(0,r.useState)(null),[x,h]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[p,b]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[N,y]=(0,r.useState)(13),[w,k]=(0,r.useState)([]),[_,C]=(0,r.useState)([]),[T,L]=(0,r.useState)([]),[M,P]=(0,r.useState)(!0),[S,O]=(0,r.useState)(new Date().toISOString().split("T")[0]);(0,r.useEffect)(()=>{E(),R(),B()},[S]);let E=async()=>{try{P(!0);let e=await l.adminAPI.getAllSchedules({date:S});e.success&&k(e.data||[])}catch(e){console.error("Error fetching schedules:",e)}finally{P(!1)}},R=async()=>{try{let e=await l.routeAPI.getAll();e.success&&C(e.data||[])}catch(e){console.error("Error fetching routes:",e)}},B=async()=>{try{let e=await l.adminAPI.getAllVans();e.success&&L(e.data||[])}catch(e){console.error("Error fetching vans:",e)}},A=e=>{if(c("edit"),m(e),h(e.van_id||e.van?.id||""),g(e.route_id||e.route?.id||""),e.departure_time&&e.departure_time.includes("T")){let[t,r]=e.departure_time.split("T");b(t),j(r.slice(0,5))}else b(e.departure_date||S),j(e.departure_time||"");y(e.total_seats||13),o(!0)},I=()=>{m(null),h(""),g(""),b(S),j(""),y(13),c("add")},z=async()=>{let e={van_id:x,route_id:f,departure_date:p,departure_time:v,total_seats:Number(N)||13};try{let t;(t="edit"===d&&u&&u.id?await l.adminAPI.updateSchedule(u.id,e):await l.adminAPI.createSchedule(e))&&t.success&&(await E(),o(!1),I())}catch(e){console.error("Error saving schedule:",e)}},H=async e=>{if(confirm("ต้องการลบรอบรถนี้ใช่หรือไม่?"))try{let t=await l.adminAPI.deleteSchedule(e);t&&t.success&&await E()}catch(e){console.error("Error deleting schedule:",e)}},W=w.reduce((e,t)=>{let r=(0,i.formatIsoTime)(t.departure_time)||t.departure_time||"00:00";return e[r]||(e[r]=[]),e[r].push(t),e},{}),D=Object.keys(W).sort();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.default,{children:(0,t.jsx)("title",{children:"จัดการรอบรถ - Admin Panel"})}),(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-2xl shadow-xl",style:{backgroundImage:"url(https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=1200&h=400&fit=crop)",backgroundSize:"cover",backgroundPosition:"center"},children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 via-gray-900/70 to-gray-900/60"}),(0,t.jsx)("div",{className:"relative z-10 p-8 md:p-12",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-3",children:"ตารางรถวิ่ง"}),(0,t.jsx)("p",{className:"text-xl text-white/90 mb-6",children:"ดูและจัดการรอบรถแต่ละวัน"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("input",{type:"date",value:S,onChange:e=>O(e.target.value),className:"bg-transparent text-white font-medium border-none outline-none"})]}),(0,t.jsxs)("span",{className:"text-white/90 font-medium",children:["รอบรถทั้งหมด ",w.length," รอบ"]})]})]}),(0,t.jsxs)(n.Button,{onClick:()=>{c("add"),I(),o(!0)},className:"bg-white text-red-600 hover:bg-red-50 font-semibold transition-all",size:"lg",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"เพิ่มรอบรถ"]})]})})]}),M?(0,t.jsx)("div",{className:"space-y-6",children:[void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-300 rounded w-24 mb-4"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)("div",{className:"h-32 bg-gray-300 rounded-xl"}),(0,t.jsx)("div",{className:"h-32 bg-gray-300 rounded-xl"})]})]},r))}):w.length>0?(0,t.jsx)("div",{className:"space-y-6",children:D.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-5 pb-4 border-b border-gray-100",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-xl bg-red-600 flex items-center justify-center text-white font-bold",children:(0,t.jsx)("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-gray-900",children:[e," น."]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[W[e].length," เที่ยว • ",(0,i.formatThaiDate)(S)]})]})]}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:W[e].map(e=>{let r=e.route||_.find(t=>t.id===e.route_id)||{},s=e.van||T.find(t=>t.id===e.van_id)||{},a=Math.max(Number(Number(e.total_seats??s.total_seats??13)||13)||13,1),l=(()=>{if("number"==typeof e.booked_seats)return e.booked_seats;if("string"==typeof e.booked_seats&&""!==e.booked_seats.trim()){let t=parseInt(e.booked_seats,10);if(!Number.isNaN(t))return t}if("number"==typeof e.bookings_count)return e.bookings_count;if("string"==typeof e.bookings_count&&""!==e.bookings_count.trim()){let t=parseInt(e.bookings_count,10);if(!Number.isNaN(t))return t}if(Array.isArray(e.bookings))return e.bookings.length;if("number"==typeof e.bookings)return e.bookings;if("number"==typeof e.booked_count)return e.booked_count;if("string"==typeof e.booked_count&&""!==e.booked_count.trim()){let t=parseInt(e.booked_count,10);if(!Number.isNaN(t))return t}return 0})();if(void 0!==e.available_seats&&null!==e.available_seats||void 0!==e.availableSeats&&null!==e.availableSeats){let t=e.available_seats??e.availableSeats,r=0;"number"==typeof t?r=Number(t):"string"!=typeof t||""===t.trim()||isNaN(Number(t))||(r=Number(t)),l=Math.max(a-r,0)}let i=Math.max(Number(l)||0,0),d=a>0?i/a*100:0;return(0,t.jsxs)("div",{className:"group relative overflow-hidden rounded-xl shadow-md hover:shadow-lg transition-all duration-300 bg-white border border-gray-200 hover:border-red-300",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-5 overflow-hidden",children:(0,t.jsx)("svg",{className:"w-full h-full text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,t.jsxs)("div",{className:"relative p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,t.jsx)("span",{className:"font-bold text-gray-900 text-lg",children:r.origin||e.origin||"-"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,t.jsx)("span",{className:"font-bold text-gray-900 text-lg",children:r.destination||e.destination||"-"})]})]}),(0,t.jsx)("div",{children:100===d?(0,t.jsx)("span",{className:"px-3 py-1.5 rounded-full text-xs font-bold bg-red-500 text-white",children:"เต็ม"}):d>=80?(0,t.jsx)("span",{className:"px-3 py-1.5 rounded-full text-xs font-bold bg-yellow-500 text-white",children:"ใกล้เต็ม"}):(0,t.jsxs)("span",{className:"px-3 py-1.5 rounded-full text-xs font-bold bg-green-500 text-white",children:["ว่าง ",a-Math.max(Number(l)||0,0)," ที่"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-200",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 font-medium mb-1",children:"รถ"}),(0,t.jsx)("div",{className:"font-mono font-bold text-gray-900",children:s.license_plate||e.license_plate||"-"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-200",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 font-medium mb-1",children:"ราคา"}),(0,t.jsxs)("div",{className:"font-bold text-gray-900",children:["฿",r.base_price||e.price||0]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-200",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 font-medium mb-1",children:"ที่นั่ง"}),(0,t.jsxs)("div",{className:"font-bold text-gray-900",children:[Math.max(Number(l)||0,0),"/",a]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[(0,t.jsxs)("span",{children:["จองแล้ว ",d.toFixed(0),"%"]}),(0,t.jsxs)("span",{children:[a-Math.max(Number(l)||0,0)," ที่ว่าง"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:`h-full rounded-full transition-all ${100===d?"bg-red-500":d>=80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${d}%`}})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",className:"flex-1 border border-blue-300 text-blue-600 hover:bg-blue-50",onClick:()=>{c("view"),m(e),o(!0)},children:[(0,t.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"ดูรายละเอียด"]}),(0,t.jsxs)(n.Button,{variant:"outline",size:"sm",className:"flex-1 border border-green-300 text-green-600 hover:bg-green-50",onClick:()=>A(e),children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"แก้ไข"]}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",className:"border border-red-300 text-red-600 hover:bg-red-50",onClick:()=>H(e.id),children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},e.id)})})]},e))}):(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-16 text-center border border-dashed border-gray-300",children:[(0,t.jsx)("svg",{className:"w-24 h-24 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"วันนี้ยังไม่มีรถวิ่ง"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"คลิกปุ่มด้านล่างเพื่อเพิ่มรอบรถ"}),(0,t.jsxs)(n.Button,{onClick:()=>o(!0),className:"bg-red-500 hover:bg-red-600 text-white",size:"lg",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"เพิ่มรอบรถ"]})]}),e&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"w-full max-w-lg bg-white rounded-xl shadow-2xl overflow-hidden animate-in zoom-in duration-300",children:[(0,t.jsx)("div",{className:"bg-red-500 px-6 py-5 text-white",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"add"===d?"สร้างรอบรถใหม่":"edit"===d?"แก้ไขรอบรถ":"รายละเอียดรอบรถ"}),(0,t.jsx)("button",{onClick:()=>{o(!1),I()},className:"w-8 h-8 rounded-lg bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),"view"===d&&u?(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"เส้นทาง"}),(0,t.jsxs)("div",{className:"font-bold",children:[u.route?.origin||u.origin," → ",u.route?.destination||u.destination]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"รถตู้"}),(0,t.jsx)("div",{className:"font-mono font-bold",children:u.van?.license_plate||u.license_plate||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"วันที่"}),(0,t.jsx)("div",{className:"font-bold",children:(0,i.formatThaiDate)(u.departure_date||u.departure_time&&u.departure_time.split("T")[0])})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"เวลา"}),(0,t.jsx)("div",{className:"font-bold",children:(0,i.formatTime)((0,i.formatIsoTime)(u.departure_time)||u.departure_time||u.departure_time)})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{o(!1),I()},children:"ปิด"}),(0,t.jsx)(n.Button,{type:"button",className:"flex-1 bg-green-600 text-white",onClick:()=>{o(!1),A(u)},children:"แก้ไข"})]})]}):(0,t.jsxs)("form",{className:"p-6 space-y-5",onSubmit:e=>{e.preventDefault(),z()},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"รถตู้"}),(0,t.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all text-gray-900 font-medium",children:[(0,t.jsx)("option",{value:"",children:"เลือกรถตู้"}),T.map(e=>(0,t.jsx)("option",{value:e.id,children:e.license_plate},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"เส้นทาง"}),(0,t.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all text-gray-900 font-medium",children:[(0,t.jsx)("option",{value:"",children:"เลือกเส้นทาง"}),_.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.origin," → ",e.destination]},e.id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"วันที่"}),(0,t.jsx)("input",{type:"date",value:p,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all text-gray-900 font-medium"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"เวลาออกเดินทาง"}),(0,t.jsx)("input",{type:"time",value:v,onChange:e=>j(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all text-gray-900 font-bold text-lg"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"จำนวนที่นั่ง"}),(0,t.jsx)("input",{type:"number",value:N,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all text-gray-900"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",className:"flex-1 border-2 hover:bg-gray-50",onClick:()=>{o(!1),I()},size:"lg",children:"ยกเลิก"}),(0,t.jsx)(n.Button,{type:"submit",className:"flex-1 bg-red-500 hover:bg-red-600 text-white transition-all",size:"lg",children:"บันทึก"})]})]})]})})]})})]})}e.s(["default",()=>o])},27060,(e,t,r)=>{let s="/admin/schedules";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(57341)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},37658,e=>{e.v(t=>Promise.all(["static/chunks/95ce80173a02b266.js"].map(t=>e.l(t))).then(()=>t(74501)))},25329,e=>{e.v(t=>Promise.all(["static/chunks/74a84198b56d1037.js"].map(t=>e.l(t))).then(()=>t(77282)))}]);