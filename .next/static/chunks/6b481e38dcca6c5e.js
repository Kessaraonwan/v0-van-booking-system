(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96455,e=>{"use strict";let t={กรุงเทพฯ:{name:"หมอชิตใหม่",full:"ท่ารถตู้หมอชิตใหม่ - กรุงเทพฯ",address:"อาคารจอดรถ ฝั่งทิศเหนือ หมอชิตใหม่",province:"กรุงเทพฯ"},กรุงเทพมหานคร:{name:"หมอชิตใหม่",full:"ท่ารถตู้หมอชิตใหม่ - กรุงเทพฯ",address:"อาคารจอดรถ ฝั่งทิศเหนือ หมอชิตใหม่",province:"กรุงเทพฯ"},พัทยา:{name:"พัทยากลาง",full:"ท่ารถตู้พัทยากลาง - ชลบุรี",address:"ใกล้เซ็นทรัลพัทยา ถนนพัทยากลาง",province:"ชลบุรี"},หัวหิน:{name:"หัวหินตลาดฉัตรไชย",full:"ท่ารถตู้หัวหิน - ประจวบคีรีขันธ์",address:"ใกล้ตลาดฉัตรไชย ถนนเพชรเกษม",province:"ประจวบคีรีขันธ์"},เชียงใหม่:{name:"อาเขต",full:"ท่ารถตู้อาเขต - เชียงใหม่",address:"ใกล้สนามบินเชียงใหม่ หน้าโลตัสอาเขต",province:"เชียงใหม่"},ขอนแก่น:{name:"เซ็นทรัลขอนแก่น",full:"ท่ารถตู้ขอนแก่น - ขอนแก่น",address:"หน้าเซ็นทรัลพลาซ่า ขอนแก่น",province:"ขอนแก่น"},ภูเก็ต:{name:"ตลาดสดภูเก็ต",full:"ท่ารถตู้ภูเก็ต - ภูเก็ต",address:"ใกล้ตลาดสดภูเก็ต ถนนรังสิต",province:"ภูเก็ต"},อยุธยา:{name:"สถานีรถอยุธยา",full:"ท่ารถตู้อยุธยา - พระนครศรีอยุธยา",address:"ใกล้สถานีรถไฟอยุธยา",province:"พระนครศรีอยุธยา"},นครราชสีมา:{name:"เทอร์มินัลโคราช",full:"ท่ารถตู้โคราช - นครราชสีมา",address:"สถานีขนส่งผู้โดยสารจังหวัดนครราชสีมา",province:"นครราชสีมา"},เชียงราย:{name:"หอนาฬิกาเชียงราย",full:"ท่ารถตู้เชียงราย - เชียงราย",address:"ใกล้หอนาฬิกา ถนนพหลโยธิน",province:"เชียงราย"},กาญจนบุรี:{name:"สะพานข้ามแม่น้ำแคว",full:"ท่ารถตู้กาญจนบุรี - กาญจนบุรี",address:"ใกล้สะพานข้ามแม่น้ำแคว",province:"กาญจนบุรี"}};function r(e){return t[e]||{name:e,full:`จุดขึ้นรถใน${e}`,address:"",province:e}}function s(e){return t[e]||{name:e,full:`จุดลงรถใน${e}`,address:"",province:e}}function a(e){if(!e)return"N/A";let t=e;e.includes("T")&&(t=e.split("T")[0]);let[r,s,a]=t.split("-");return`${parseInt(a)} ${["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."][parseInt(s)-1]} ${parseInt(r)+543}`}function n(e){if(!e)return"N/A";try{if(e.includes("T")){let t=e.split("T");if(t[1]){let e=t[1].split(":");return`${e[0]}:${e[1]} น.`}}let t=e.split(":");return`${t[0]}:${t[1]} น.`}catch(e){return"N/A"}}function i(e){if(!e)return!0;if("string"==typeof e){let t=e.trim();if(""===t||t.startsWith("0000")||t.startsWith("0001")||t.startsWith("0000-00-00"))return!0}let t=new Date(e);return!!(Number.isNaN(t.getTime())||t.getFullYear&&1>=t.getFullYear())}function l(e){if(i(e))return null;try{if("string"==typeof e&&e.includes("T")){let t=e.split("T")[1];if(!t)return null;let r=t.split(":")[0],s=t.split(":")[1];return`${r.padStart(2,"0")}:${s.padStart(2,"0")}`}let t=new Date(e);if(Number.isNaN(t.getTime()))return null;let r=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return`${r}:${s}`}catch(e){return null}}e.s(["formatIsoTime",()=>l,"formatThaiDate",()=>a,"formatTime",()=>n,"getDropoffLocation",()=>s,"getPickupLocation",()=>r,"isZeroOrInvalidTimestamp",()=>i])},6727,e=>{"use strict";var t=e.i(94601),r=e.i(34474),s=e.i(58331),a=e.i(36960),n=e.i(72262);function i({children:e}){let i=(0,s.useRouter)(),l=i.pathname,[o,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{{let e=(0,n.getToken)(),t=(0,n.getUser)();if(!e||!(t&&t.role&&"admin"===t.role.toLowerCase())){d(!0),setTimeout(()=>{window.location.href="/admin/login"},650);return}let r=e=>{d(!0)};return window.addEventListener("api:unauthorized",r),()=>{window.removeEventListener("api:unauthorized",r)}}},[]);let c=[{label:"Dashboard",href:"/admin/dashboard",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{label:"รถตู้",href:"/admin/vans",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})},{label:"เส้นทาง",href:"/admin/routes",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},{label:"รอบรถ",href:"/admin/schedules",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{label:"การจอง",href:"/admin/bookings",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"container mx-auto px-4 lg:px-8",children:(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-900",children:"Admin Panel"}),(0,t.jsx)("div",{className:"text-xs text-gray-600 -mt-0.5",children:"VanGo Management"})]})]}),(0,t.jsxs)("button",{onClick:()=>{try{(0,n.removeTokens)()}catch(e){}i.push("/admin/login")},className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition-colors px-3 py-2 rounded-lg hover:bg-gray-100",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"ออกจากระบบ"]})]})})}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("aside",{className:"w-64 min-h-[calc(100vh-65px)] bg-white border-r border-gray-200 sticky top-16 hidden lg:block",children:(0,t.jsx)("nav",{className:"p-4 space-y-1",children:c.map(e=>{let s=l===e.href;return(0,t.jsx)(r.default,{href:e.href,children:(0,t.jsxs)("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium ${s?"bg-blue-600 text-white shadow-sm":"text-gray-700 hover:bg-gray-100"}`,children:[e.icon,e.label]})},e.href)})})}),(0,t.jsx)("main",{className:"flex-1 p-6 lg:p-8",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:e})})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2",children:"ต้องล็อกอินด้วยบัญชีแอดมิน"}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:"หน้านี้ต้องใช้สิทธิ์ผู้ดูแลระบบ กรุณาล็อกอินด้วยบัญชีแอดมินเพื่อใช้งานหรือคลิกปุ่มเข้าสู่ระบบ"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{d(!1)},className:"px-4 py-2 rounded-lg border",children:"ปิด"}),(0,t.jsx)(r.default,{href:"/admin/login",children:(0,t.jsx)("button",{className:"px-4 py-2 rounded-lg bg-red-600 text-white",children:"ไปที่หน้าเข้าสู่ระบบ"})})]})]})})]})}e.s(["default",()=>i])},68689,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={AppRouterContext:function(){return i},GlobalLayoutRouterContext:function(){return o},LayoutRouterContext:function(){return l},MissingSlotContext:function(){return c},TemplateContext:function(){return d}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(2879)._(e.r(36960)),i=n.default.createContext(null),l=n.default.createContext(null),o=n.default.createContext(null),d=n.default.createContext(null),c=n.default.createContext(new Set)},49861,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={NavigationPromisesContext:function(){return d},PathParamsContext:function(){return o},PathnameContext:function(){return l},SearchParamsContext:function(){return i},createDevToolsInstrumentedPromise:function(){return c}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(36960),i=(0,n.createContext)(null),l=(0,n.createContext)(null),o=(0,n.createContext)(null),d=(0,n.createContext)(null);function c(e,t){let r=Promise.resolve(t);return r.status="fulfilled",r.value=t,r.displayName=`${e} (SSR)`,r}},16383,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={BailoutToCSRError:function(){return i},isBailoutToCSRError:function(){return l}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n="BAILOUT_TO_CLIENT_SIDE_RENDERING";class i extends Error{constructor(e){super(`Bail out to client-side rendering: ${e}`),this.reason=e,this.digest=n}}function l(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===n}},37750,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={HTTPAccessErrorStatus:function(){return n},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return l},getAccessFallbackErrorTypeByStatus:function(){return c},getAccessFallbackHTTPStatus:function(){return d},isHTTPAccessFallbackError:function(){return o}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},i=new Set(Object.values(n)),l="NEXT_HTTP_ERROR_FALLBACK";function o(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===l&&i.has(Number(r))}function d(e){return Number(e.digest.split(";")[1])}function c(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},32739,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return a}});var s,a=((s={})[s.SeeOther=303]="SeeOther",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.PermanentRedirect=308]="PermanentRedirect",s);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},51894,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s,a={REDIRECT_ERROR_CODE:function(){return l},RedirectType:function(){return o},isRedirectError:function(){return d}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let i=e.r(32739),l="NEXT_REDIRECT";var o=((s={}).push="push",s.replace="replace",s);function d(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,s]=t,a=t.slice(2,-2).join(";"),n=Number(t.at(-2));return r===l&&("replace"===s||"push"===s)&&"string"==typeof a&&!isNaN(n)&&n in i.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},26855,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return n}});let s=e.r(37750),a=e.r(51894);function n(e){return(0,a.isRedirectError)(e)||(0,s.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},87974,e=>{"use strict";var t=e.i(94601),r=e.i(36960),s=e.i(34474),a=e.i(14586),n=e.i(6727),i=e.i(43255),l=e.i(72262),o=e.i(96455);function d(){let[e,d]=(0,r.useState)({todayBookings:0,todayPassengers:0,todayTrips:0,revenue:0,activeVans:0,pendingBookings:0}),[c,u]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[x,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{g()},[]);let g=async()=>{try{f(!0);let e=new Date().toISOString().split("T")[0],[t,r,s]=await Promise.all([l.adminAPI.getDashboardStats(),l.adminAPI.getTodaySchedules(),l.adminAPI.getAllVans()]);if(t.success){let e=t.data||{},r=e.recent_bookings||[],a=r.filter(e=>"pending"===(e.booking_status||e.status||"").toLowerCase()).length,n=s&&s.success?(s.data||[]).filter(e=>"active"===(e.status||"").toLowerCase()).length:0;d({todayBookings:e.bookings_today||e.total_bookings||0,todayPassengers:e.passengers_today||0,todayTrips:e.trips_today||e.total_routes||0,revenue:e.total_revenue||0,activeVans:n,pendingBookings:void 0!==e.pending_today?e.pending_today:a}),m(r);try{if(r.filter(e=>!(e.schedule&&(e.schedule.route&&(e.schedule.route.origin||e.schedule.route.destination)||e.schedule.origin&&e.schedule.destination))).length>0){let e=await Promise.all(r.map(async e=>{try{let t=e.schedule?.id||e.schedule_id||e.schedule?.schedule_id||e.schedule_id;if(!t)return e;let r=await l.scheduleAPI.getById(t);if(r&&r.success&&r.data)return{...e,schedule:r.data};return e}catch(t){return e}}));m(e)}}catch(e){console.warn("Failed to enrich recent bookings with schedules",e)}}if(r&&r.success){let t=(r.data||r.schedules||[]).filter(t=>{let r=t.departure_date||t.date||(t.departure_time?t.departure_time.split("T")[0]:null);return r&&r.startsWith(e)});u(t)}}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{f(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.default,{children:(0,t.jsx)("title",{children:"Dashboard - Admin Panel"})}),(0,t.jsx)(n.default,{children:x?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-red-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"กำลังโหลดข้อมูล..."})]})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-2xl shadow-xl",style:{backgroundImage:"url(https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=1200&h=400&fit=crop)",backgroundSize:"cover",backgroundPosition:"center"},children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/80 via-gray-900/70 to-gray-900/60"}),(0,t.jsx)("div",{className:"relative z-10 p-8 md:p-12",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-3",children:"ภาพรวมระบบจองรถตู้วันนี้"}),(0,t.jsx)("p",{className:"text-xl text-white/90 mb-6",children:"สรุปยอดวันนี้"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-white/90",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("span",{className:"font-medium",children:new Date().toLocaleDateString("th-TH",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)("div",{className:"w-32 h-32 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-16 h-16 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-200 hover:border-red-300 group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-xl bg-red-600 flex items-center justify-center mb-4 group-hover:scale-105 transition-transform",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.todayBookings}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"จองวันนี้"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-200 hover:border-red-300 group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-xl bg-red-600 flex items-center justify-center mb-4 group-hover:scale-105 transition-transform",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.todayPassengers}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"คนขึ้นรถ"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-200 hover:border-red-300 group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-xl bg-red-600 flex items-center justify-center mb-4 group-hover:scale-105 transition-transform",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.todayTrips}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"วิ่งวันนี้"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-200 hover:border-red-300 group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-xl bg-red-600 flex items-center justify-center mb-4 group-hover:scale-105 transition-transform",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:["฿",(e.revenue/1e3).toFixed(0),"K"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"ยอดวันนี้"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-200 hover:border-red-300 group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-xl bg-red-600 flex items-center justify-center mb-4 group-hover:scale-105 transition-transform",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.activeVans}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"รถวิ่ง"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-200 hover:border-red-300 group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-xl bg-red-600 flex items-center justify-center mb-4 group-hover:scale-105 transition-transform",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.pendingBookings}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"รอยืนยัน"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"เที่ยววันนี้"}),(0,t.jsx)("p",{className:"text-gray-600",children:"รถที่กำลังวิ่ง"})]}),(0,t.jsx)(s.default,{href:"/admin/schedules",children:(0,t.jsxs)(a.Button,{className:"bg-red-500 hover:bg-red-600 text-white",children:["ดูทั้งหมด",(0,t.jsx)("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[0!==c.length||x?null:(0,t.jsxs)("div",{className:"col-span-3 text-center py-12 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"ไม่มีรอบรถวันนี้"})]}),c.map(e=>{let r=Number(e.total_seats??e.van?.total_seats)||13,s=Math.max(Number(r)||13,1),a=0;if("number"==typeof e.booked_seats?a=e.booked_seats:"string"!=typeof e.booked_seats||isNaN(Number(e.booked_seats))?"number"==typeof e.total_passengers?a=e.total_passengers:"string"!=typeof e.total_passengers||isNaN(Number(e.total_passengers))?Array.isArray(e.bookings)?a=e.bookings.length:"number"==typeof e.bookings_count?a=e.bookings_count:"string"!=typeof e.bookings_count||isNaN(Number(e.bookings_count))?"number"==typeof e.booked_count?a=e.booked_count:"string"!=typeof e.booked_count||isNaN(Number(e.booked_count))||(a=Number(e.booked_count)):a=Number(e.bookings_count):a=Number(e.total_passengers):a=Number(e.booked_seats),void 0!==e.available_seats&&null!==e.available_seats||void 0!==e.availableSeats&&null!==e.availableSeats){let t=e.available_seats??e.availableSeats;if("number"==typeof t){let e=Number(t);isNaN(e)||(a=Math.max(s-e,0))}else"string"!=typeof t||isNaN(Number(t))||(a=Math.max(s-Number(t),0))}let n=Math.max(Number(a)||0,0),i=n/s*100;return(!isFinite(i)||isNaN(i))&&(i=0),i=Math.min(Math.max(i,0),100),(0,t.jsx)("div",{className:"group relative rounded-xl shadow-md hover:shadow-lg transition-all duration-300 bg-white border border-gray-200 hover:border-red-300",children:(0,t.jsxs)("div",{className:"p-4 md:p-5 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-white/90 text-gray-900 font-bold shadow",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{className:"text-sm",children:(0,o.formatTime)(e.departure_time)})]})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-gray-900 text-sm md:text-base",children:[e.route?.origin," → ",e.route?.destination]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"flex items-center gap-1",children:e.van?.license_plate||"—"}),(0,t.jsxs)("span",{children:[n,"/",r," ที่นั่ง"]}),(0,t.jsx)("span",{className:"text-gray-400",children:(0,o.formatThaiDate)(e.departure_date||e.date||e.departure_time)})]})]})})}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2 w-36",children:[(0,t.jsx)("div",{children:100===i?(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-red-500 text-white shadow",children:"เต็ม"}):i>=80?(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-yellow-500 text-white shadow",children:"ใกล้เต็ม"}):(0,t.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-green-500 text-white shadow",children:["ว่าง ",Math.max(s-n,0)," ที่"]})}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:`h-full rounded-full ${100===i?"bg-red-500":i>=80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${i}%`}})})]})]})},e.id)})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"ออเดอร์ล่าสุด"}),(0,t.jsx)("p",{className:"text-gray-600",children:"รายการจองที่เข้ามาใหม่"})]}),(0,t.jsx)(s.default,{href:"/admin/bookings",children:(0,t.jsxs)(a.Button,{variant:"outline",className:"border border-gray-300 hover:border-red-500 hover:text-red-600",children:["ดูทั้งหมด",(0,t.jsx)("svg",{className:"w-4 h-4 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[0!==h.length||x?null:(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"ยังไม่มีออเดอร์เข้ามา"})]}),h.map(e=>{let r=[e.user?.full_name,e.user?.name,e.customer_name,e.passenger_name,e.name,e.email].find(e=>!!e)||"ไม่ระบุชื่อ",s=(r||"น").substring(0,2).toUpperCase(),a="ไม่ระบุเส้นทาง";e.schedule?.route?.origin&&e.schedule?.route?.destination?a=`${e.schedule.route.origin} → ${e.schedule.route.destination}`:e.schedule?.origin&&e.schedule?.destination?a=`${e.schedule.origin} → ${e.schedule.destination}`:e.route_origin&&e.route_destination&&(a=`${e.route_origin} → ${e.route_destination}`);let n=(e=>{if(Array.isArray(e.seats)&&e.seats.length>0)return e.seats.length;if(e.seat_number||e.SeatNumber||e.seatNumber)return 1;if("number"==typeof e.seats_count)return e.seats_count;if("number"==typeof e.number_of_seats)return e.number_of_seats;if("number"==typeof e.total_seats)return e.total_seats;if("number"==typeof e.quantity)return e.quantity;for(let t of["seats_count","number_of_seats","total_seats","quantity","bookings_count","booked_count"])if("string"==typeof e[t]&&""!==e[t].trim()&&!isNaN(Number(e[t])))return Number(e[t]);if(Array.isArray(e.bookings)&&e.bookings.length>0)return e.bookings.length;if(e.schedule&&(e.schedule.total_seats||e.schedule.available_seats)||e.total_seats&&void 0!==e.available_seats){let t=Number(e.schedule?.total_seats??e.total_seats)||0,r=Number(e.schedule?.available_seats??e.available_seats);if(t>0&&!isNaN(r))return Math.max(t-r,0)}return"--"})(e),i=e.payment?.amount||e.total_price||e.price||e.amount||0,l=(e.status||e.booking_status||e.payment?.status||"").toUpperCase();return(0,t.jsxs)("div",{className:"flex items-center gap-4 p-5 rounded-xl border border-gray-200 hover:border-red-300 hover:shadow-md transition-all duration-300 hover:bg-gray-50",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-xl bg-red-500 flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:s}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-bold text-gray-900 mb-1",children:r}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a]})]}),(0,t.jsxs)("div",{className:"text-center px-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:n}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"ที่นั่ง"})]}),(0,t.jsx)("div",{className:"text-right px-4",children:(0,t.jsxs)("div",{className:"text-xl font-bold text-red-600",children:["฿",i]})}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(e=>{switch(e){case"CONFIRMED":return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"ยืนยันแล้ว"]});case"PENDING":return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold bg-yellow-100 text-yellow-700",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"รอดำเนินการ"]});default:return null}})(l)})]},e.id)})]})]})]})})]})}e.s(["default",()=>d])},97250,(e,t,r)=>{let s="/admin/dashboard";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(87974)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},37658,e=>{e.v(t=>Promise.all(["static/chunks/95ce80173a02b266.js"].map(t=>e.l(t))).then(()=>t(74501)))},25329,e=>{e.v(t=>Promise.all(["static/chunks/74a84198b56d1037.js"].map(t=>e.l(t))).then(()=>t(77282)))}]);