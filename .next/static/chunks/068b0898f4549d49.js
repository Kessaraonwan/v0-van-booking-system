(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72262,e=>{"use strict";let t=e.i(80335).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api",a=()=>localStorage.getItem("accessToken"),s=e=>{localStorage.setItem("accessToken",e)},n=()=>localStorage.getItem("refreshToken"),o=e=>{localStorage.setItem("refreshToken",e)},r=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")},c=e=>{localStorage.setItem("user",JSON.stringify(e))},i=async(e,s={})=>{let n=a(),o={"Content-Type":"application/json",...s.headers};n&&(o.Authorization=`Bearer ${n}`);let c={...s,headers:o};try{let a=await fetch(`${t}${e}`,c),o=await a.text(),l=null;try{l=o?JSON.parse(o):null}catch(e){l=o}if(!a.ok){if(401===a.status&&n){if(await d())return i(e,s);r(),window.location.href="/login"}let t=l&&"object"==typeof l&&l.message?l.message:"string"==typeof l?l:"API request failed";throw Error(t)}return l}catch(e){throw console.error("API Request Error:",e),e}},d=async()=>{let e=n();if(!e)return!1;try{let a=await fetch(`${t}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})}),n=await a.text(),r=null;try{r=n?JSON.parse(n):null}catch(e){r=n}if(a.ok&&r&&r.success)return s(r.data.accessToken),o(r.data.refreshToken),!0;return!1}catch(e){return console.error("Token refresh error:",e),!1}},l={register:async e=>{let t=await i("/auth/register",{method:"POST",body:JSON.stringify(e)});return t.success&&(s(t.data.accessToken),o(t.data.refreshToken),c(t.data.user)),t},login:async e=>{let t=await i("/auth/login",{method:"POST",body:JSON.stringify(e)});return t.success&&(s(t.data.accessToken),o(t.data.refreshToken),c(t.data.user)),t},logout:()=>{r()},getProfile:async()=>i("/auth/me"),updateProfile:async e=>i("/auth/me",{method:"PUT",body:JSON.stringify(e)}),changePassword:async e=>i("/auth/change-password",{method:"POST",body:JSON.stringify(e)})},y={search:async e=>{let t=new URLSearchParams(e).toString();return i(`/schedules/search?${t}`)},getById:async e=>i(`/schedules/${e}`),getSeats:async e=>i(`/schedules/${e}/seats`),getAll:async()=>i("/schedules")},g={create:async e=>i("/bookings",{method:"POST",body:JSON.stringify(e)}),getMyBookings:async(e="all")=>{let t=e&&"all"!==e?`?status=${e}`:"";return i(`/bookings${t}`)},getById:async e=>i(`/bookings/${e}`),cancel:async(e,t)=>i(`/bookings/${e}/cancel`,{method:"PUT",body:JSON.stringify({reason:t})})},u={getAll:async()=>i("/routes"),getById:async e=>i(`/routes/${e}`),getPickupPoints:async e=>i(`/routes/${e}/pickup-points`),getDropoffPoints:async e=>i(`/routes/${e}/dropoff-points`)},h={getAll:async()=>i("/vans"),getById:async e=>i(`/vans/${e}`)},m={getDashboardStats:async()=>i("/admin/dashboard"),getTodaySchedules:async()=>i("/admin/schedules"),getRecentBookings:async(e=10)=>i("/admin/dashboard"),getAllBookings:async(e={})=>{let t=new URLSearchParams(e).toString();return i(`/admin/bookings?${t}`)},getBookingDetails:async e=>i(`/admin/bookings/${e}`),updateBookingStatus:async(e,t)=>i(`/admin/bookings/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})}),getAllSchedules:async(e={})=>{let t=new URLSearchParams(e).toString();return i(`/admin/schedules?${t}`)},createSchedule:async e=>i("/admin/schedules",{method:"POST",body:JSON.stringify(e)}),updateSchedule:async(e,t)=>i(`/admin/schedules/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteSchedule:async e=>i(`/admin/schedules/${e}`,{method:"DELETE"}),getAllVans:async()=>i("/admin/vans"),createVan:async e=>i("/admin/vans",{method:"POST",body:JSON.stringify(e)}),updateVan:async(e,t)=>i(`/admin/vans/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteVan:async e=>i(`/admin/vans/${e}`,{method:"DELETE"}),getAllRoutes:async()=>i("/admin/routes"),createRoute:async e=>i("/admin/routes",{method:"POST",body:JSON.stringify(e)}),updateRoute:async(e,t)=>i(`/admin/routes/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteRoute:async e=>i(`/admin/routes/${e}`,{method:"DELETE"})};e.s(["adminAPI",0,m,"authAPI",0,l,"bookingAPI",0,g,"default",0,{authAPI:l,scheduleAPI:y,bookingAPI:g,routeAPI:u,vanAPI:h,adminAPI:m},"getRefreshToken",0,n,"getToken",0,a,"getUser",0,()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}},"paymentsAPI",0,{create:async e=>i("/payments",{method:"POST",body:JSON.stringify(e)}),getByBookingId:async e=>i(`/payments/${e}`)},"removeTokens",0,r,"reviewAPI",0,{getAll:async(e={})=>{let t=new URLSearchParams(e).toString(),a=t?`?${t}`:"";return i(`/reviews${a}`)}},"routeAPI",0,u,"scheduleAPI",0,y,"setRefreshToken",0,o,"setToken",0,s,"setUser",0,c,"vanAPI",0,h])}]);